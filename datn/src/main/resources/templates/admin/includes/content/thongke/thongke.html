<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org"-->
<!--      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"-->
<!--      layout:decorate="~{admin/layout.html}">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.min.css">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/tom-select"></script>-->
<!--    <title>Thống kê</title>-->
<!--</head>-->
<!--<body>-->
<!--<div layout:fragment="admincontent">-->
<!--    <div class="flex flex-col gap-4">-->
<!--        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4">-->
<!--            <div class="card card-layout-frame">-->
<!--                <div class="card-body">-->
<!--                    <div class="flex items-center gap-4">-->
<!--                        <span class="avatar avatar-rounded bg-indigo-100 text-indigo-600 dark:bg-indigo-500/20 dark:text-indigo-100 avatar-lg text-3xl"-->
<!--                              data-avatar-size="55">-->
<!--                            <span class="avatar-icon">-->
<!--                                <svg stroke="currentColor" fill="currentColor"-->
<!--                                     stroke-width="0" viewBox="0 0 20 20"-->
<!--                                     aria-hidden="true" height="1em" width="1em"-->
<!--                                     xmlns="http://www.w3.org/2000/svg">-->
<!--                                    <path fill-rule="evenodd"-->
<!--                                          d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z"-->
<!--                                          clip-rule="evenodd"></path>-->
<!--                                </svg>-->
<!--                            </span>-->
<!--                        </span>-->
<!--                        <div>-->
<!--                            <div class="flex gap-1.5 items-end mb-2">-->
<!--                                <h3 class="font-bold leading-none">63</h3>-->
<!--                                <p class="font-semibold">New Leads</p>-->
<!--                            </div>-->
<!--                            <p class="flex items-center gap-1">-->
<!--                                <span class="flex items-center rounded-full gap-1">-->
<!--                                    <span class="rounded-full p-1 bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100">-->
<!--                                        <svg stroke="currentColor" fill="none"-->
<!--                                             stroke-width="2" viewBox="0 0 24 24"-->
<!--                                             aria-hidden="true" height="1em" width="1em"-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path stroke-linecap="round"-->
<!--                                                  stroke-linejoin="round"-->
<!--                                                  d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>-->
<!--                                        </svg>-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold text-emerald-600">+ 2.6</span>-->
<!--                                </span>-->
<!--                                <span>this month</span>-->
<!--                            </p>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card card-layout-frame">-->
<!--                <div class="card-body">-->
<!--                    <div class="flex items-center gap-4">-->
<!--                        <span class="avatar avatar-rounded bg-cyan-100 text-cyan-600 dark:bg-cyan-500/20 dark:text-cyan-100 avatar-lg text-3xl"-->
<!--                              data-avatar-size="55">-->
<!--                            <span class="avatar-icon">-->
<!--                                <svg stroke="currentColor" fill="currentColor"-->
<!--                                     stroke-width="0" viewBox="0 0 20 20"-->
<!--                                     aria-hidden="true" height="1em" width="1em"-->
<!--                                     xmlns="http://www.w3.org/2000/svg">-->
<!--                                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>-->
<!--                                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>-->
<!--                                </svg>-->
<!--                            </span>-->
<!--                        </span>-->
<!--                        <div>-->
<!--                            <div class="flex gap-1.5 items-end mb-2">-->
<!--                                <h3 class="font-bold leading-none">25</h3>-->
<!--                                <p class="font-semibold">Email</p>-->
<!--                            </div>-->
<!--                            <p class="flex items-center gap-1">-->
<!--                                <span class="flex items-center rounded-full gap-1">-->
<!--                                    <span class="rounded-full p-1 bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100">-->
<!--                                        <svg stroke="currentColor" fill="none"-->
<!--                                             stroke-width="2" viewBox="0 0 24 24"-->
<!--                                             aria-hidden="true" height="1em" width="1em"-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path stroke-linecap="round"-->
<!--                                                  stroke-linejoin="round"-->
<!--                                                  d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>-->
<!--                                        </svg>-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold text-emerald-600">+ 5.5</span>-->
<!--                                </span>-->
<!--                                <span>this month</span>-->
<!--                            </p>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card card-layout-frame">-->
<!--                <div class="card-body">-->
<!--                    <div class="flex items-center gap-4">-->
<!--                        <span class="avatar avatar-rounded bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100 avatar-lg text-3xl"-->
<!--                              data-avatar-size="55">-->
<!--                            <span class="avatar-icon">-->
<!--                                <svg stroke="currentColor" fill="currentColor"-->
<!--                                     stroke-width="0" viewBox="0 0 20 20"-->
<!--                                     aria-hidden="true" height="1em" width="1em"-->
<!--                                     xmlns="http://www.w3.org/2000/svg">-->
<!--                                    <path fill-rule="evenodd"-->
<!--                                          d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z"-->
<!--                                          clip-rule="evenodd"></path>-->
<!--                                </svg>-->
<!--                            </span>-->
<!--                        </span>-->
<!--                        <div>-->
<!--                            <div class="flex gap-1.5 items-end mb-2">-->
<!--                                <h3 class="font-bold leading-none">49</h3>-->
<!--                                <p class="font-semibold">Proposals</p>-->
<!--                            </div>-->
<!--                            <p class="flex items-center gap-1">-->
<!--                                <span class="flex items-center rounded-full gap-1">-->
<!--                                    <span class="rounded-full p-1 text-red-600 bg-red-100 dark:text-red-100 dark:bg-red-500/20">-->
<!--                                        <svg stroke="currentColor" fill="none"-->
<!--                                             stroke-width="2" viewBox="0 0 24 24"-->
<!--                                             aria-hidden="true" height="1em" width="1em"-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path stroke-linecap="round"-->
<!--                                                  stroke-linejoin="round"-->
<!--                                                  d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"></path>-->
<!--                                        </svg>-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold text-red-600">-0.7</span>-->
<!--                                </span>-->
<!--                                <span>this month</span>-->
<!--                            </p>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card card-layout-frame">-->
<!--                <div class="card-body">-->
<!--                    <div class="flex items-center gap-4">-->
<!--                            <span class="avatar avatar-rounded bg-amber-100 text-amber-600 dark:bg-amber-500/20 dark:text-amber-100 avatar-lg text-3xl"-->
<!--                                  data-avatar-size="55">-->
<!--                                <span class="avatar-icon">-->
<!--                                    <svg stroke="currentColor" fill="currentColor"-->
<!--                                         stroke-width="0" viewBox="0 0 20 20"-->
<!--                                         aria-hidden="true" height="1em" width="1em"-->
<!--                                         xmlns="http://www.w3.org/2000/svg">-->
<!--                                        <path fill-rule="evenodd"-->
<!--                                              d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"-->
<!--                                              clip-rule="evenodd"></path>-->
<!--                                    </svg>-->
<!--                                </span>-->
<!--                            </span>-->
<!--                        <div>-->
<!--                            <div class="flex gap-1.5 items-end mb-2">-->
<!--                                <h3 class="font-bold leading-none">12</h3>-->
<!--                                <p class="font-semibold">Appointment</p>-->
<!--                            </div>-->
<!--                            <p class="flex items-center gap-1">-->
<!--                                <span class="flex items-center rounded-full gap-1">-->
<!--                                    <span class="rounded-full p-1 bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100">-->
<!--                                        <svg stroke="currentColor" fill="none"-->
<!--                                             stroke-width="2" viewBox="0 0 24 24"-->
<!--                                             aria-hidden="true" height="1em" width="1em"-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path stroke-linecap="round"-->
<!--                                                  stroke-linejoin="round"-->
<!--                                                  d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>-->
<!--                                        </svg>-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold text-emerald-600">+ 2.6</span>-->
<!--                                </span>-->
<!--                                <span>this month</span>-->
<!--                            </p>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="grid grid-cols-1 xl:grid-cols-11 gap-4 mt-4">-->
<!--        <div class="card card-layout-frame 2xl:col-span-8 xl:col-span-7">-->
<!--            <div class="card-body">-->
<!--                <div class="flex flex-col sm:flex-row items-center justify-between gap-4 mb-6">-->
<!--                    <div>-->
<!--                        <p>Portfolio Balance</p>-->
<!--                        <h4 class="font-bold">-->
<!--                            <span>$45,966.12</span>-->
<!--                        </h4>-->
<!--                    </div>-->
<!--                    <div class="segment segment-sm">-->
<!--                        <button class="segment-item">Week</button>-->
<!--                        <button class="segment-item segment-item-active">Month</button>-->
<!--                        <button class="segment-item">Year</button>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div id="portfolio-perfomance-chart"></div>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="card card-layout-frame 2xl:col-span-3 xl:col-span-4">-->
<!--            <div class="card card-layout-frame">-->
<!--                <div class="card-body">-->
<!--                    <h4>Categories</h4>-->
<!--                    <div class="mt-6">-->
<!--                        <div id="categories-chart"></div>-->
<!--                    </div>-->
<!--                    <div class="mt-6 grid grid-cols-2 gap-4 max-w-[180px] mx-auto">-->
<!--                        <div class="flex items-center gap-1">-->
<!--                            <span class="badge-dot" style="background-color: rgb(79, 70, 229);"></span>-->
<!--                            <span class="font-semibold">Devices</span>-->
<!--                        </div>-->
<!--                        <div class="flex items-center gap-1">-->
<!--                            <span class="badge-dot" style="background-color: rgb(59, 130, 246);"></span>-->
<!--                            <span class="font-semibold">Watches</span>-->
<!--                        </div>-->
<!--                        <div class="flex items-center gap-1">-->
<!--                            <span class="badge-dot" style="background-color: rgb(16, 185, 129);"></span>-->
<!--                            <span class="font-semibold">Bags</span>-->
<!--                        </div>-->
<!--                        <div class="flex items-center gap-1">-->
<!--                            <span class="badge-dot" style="background-color: rgb(245, 158, 11);"></span>-->
<!--                            <span class="font-semibold">Shoes</span>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="grid grid-cols-1 xl:grid-cols-11 gap-4 mt-4">-->
<!--        <div class="card card-layout-frame 2xl:col-span-8 xl:col-span-7">-->
<!--            <div class="card-body">-->
<!--                <div class="flex items-center justify-between mb-6">-->
<!--                    <h4>Latest Orders</h4>-->
<!--                    <button class="btn btn-sm btn-default">View Orders</button>-->
<!--                </div>-->
<!--                <div class="overflow-x-auto">-->
<!--                    <table class="table-default table-hover">-->
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th>Order</th>-->
<!--                            <th>Status</th>-->
<!--                            <th>Date</th>-->
<!--                            <th>Customer</th>-->
<!--                            <th>Profile Progress</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <span class="cursor-pointer select-none font-semibold hover:text-indigo-600">#95954</span>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <div class="flex items-center">-->
<!--                                    <span class="badge-dot bg-emerald-500"></span>-->
<!--                                    <span class="ml-2 rtl:mr-2 capitalize font-semibold text-emerald-500">Paid</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span>10/08/2022</span>-->
<!--                            </td>-->
<!--                            <td>Ron Vargas</td>-->
<!--                            <td>-->
<!--                                <span>$168.00</span-->
<!--                                ></td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <span class="cursor-pointer select-none font-semibold hover:text-indigo-600">#95423</span>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <div class="flex items-center">-->
<!--                                    <span class="badge-dot bg-emerald-500"></span>-->
<!--                                    <span class="ml-2 rtl:mr-2 capitalize font-semibold text-emerald-500">Paid</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span>30/07/2022</span>-->
<!--                            </td>-->
<!--                            <td>Carolyn Hanso</td>-->
<!--                            <td>-->
<!--                                <span>$523.00</span>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <span class="cursor-pointer select-none font-semibold hover:text-indigo-600">#92903</span>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <div class="flex items-center">-->
<!--                                    <span class="badge-dot bg-amber-500"></span>-->
<!--                                    <span class="ml-2 rtl:mr-2 capitalize font-semibold text-amber-500">Pending</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span>18/07/2022</span>-->
<!--                            </td>-->
<!--                            <td>Gabriella May</td>-->
<!--                            <td>-->
<!--                                <span>$81.00</span>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <span class="cursor-pointer select-none font-semibold hover:text-indigo-600">#92627</span>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <div class="flex items-center">-->
<!--                                    <span class="badge-dot bg-red-500"></span>-->
<!--                                    <span class="ml-2 rtl:mr-2 capitalize font-semibold text-red-500">Failed</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span>09/07/2022</span>-->
<!--                            </td>-->
<!--                            <td>Tara Fletcher</td>-->
<!--                            <td>-->
<!--                                <span>$279.00</span>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <span class="cursor-pointer select-none font-semibold hover:text-indigo-600">#89332</span>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <div class="flex items-center">-->
<!--                                    <span class="badge-dot bg-emerald-500"></span>-->
<!--                                    <span class="ml-2 rtl:mr-2 capitalize font-semibold text-emerald-500">Paid</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span>02/06/2022</span>-->
<!--                            </td>-->
<!--                            <td>Eileen Horton</td>-->
<!--                            <td>-->
<!--                                <span>$597.00</span>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <span class="cursor-pointer select-none font-semibold hover:text-indigo-600">#86497</span>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <div class="flex items-center">-->
<!--                                    <span class="badge-dot bg-red-500"></span>-->
<!--                                    <span class="ml-2 rtl:mr-2 capitalize font-semibold text-red-500">Failed</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span>19/03/2022</span>-->
<!--                            </td>-->
<!--                            <td>Lloyd Obrien</td>-->
<!--                            <td>-->
<!--                                <span>$189.00</span>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <span class="cursor-pointer select-none font-semibold hover:text-indigo-600">#86212</span>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <div class="flex items-center">-->
<!--                                    <span class="badge-dot bg-emerald-500"></span>-->
<!--                                    <span class="ml-2 rtl:mr-2 capitalize font-semibold text-emerald-500">Paid</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>-->
<!--                                <span>09/03/2022</span>-->
<!--                            </td>-->
<!--                            <td>Tara Fletcher</td>-->
<!--                            <td>-->
<!--                                <span>$672.00</span>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="card card-layout-frame 2xl:col-span-3 xl:col-span-4">-->
<!--            <div class="card-body">-->
<!--                <div class="flex items-center justify-between mb-4">-->
<!--                    <h4>Top Selling</h4>-->
<!--                    <button class="btn btn-sm btn-default">View Products</button>-->
<!--                </div>-->
<!--                <div class="overflow-x-auto">-->
<!--                    <table class="table-default table-hover">-->
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th>Product</th>-->
<!--                            <th>Sold</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <div class="flex items-center gap-2">-->
<!--                                    <span class="avatar avatar-rounded avatar-md">-->
<!--                                        <img-->
<!--                                                class="avatar-img avatar-rounded"-->
<!--                                                src="img/products/product-1.jpg"-->
<!--                                                loading="lazy"-->
<!--                                        />-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold"-->
<!--                                    >Luminaire Giotto Headphones</span-->
<!--                                    >-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>252</td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <div class="flex items-center gap-2">-->
<!--                                    <span class="avatar avatar-rounded avatar-md">-->
<!--                                        <img-->
<!--                                                class="avatar-img avatar-rounded"-->
<!--                                                src="img/products/product-3.jpg"-->
<!--                                                loading="lazy"-->
<!--                                        />-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold">Black Sneaker</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>186</td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <div class="flex items-center gap-2">-->
<!--                                    <span class="avatar avatar-rounded avatar-md">-->
<!--                                        <img-->
<!--                                                class="avatar-img avatar-rounded"-->
<!--                                                src="img/products/product-4.jpg"-->
<!--                                                loading="lazy"-->
<!--                                        />-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold">Gray Hoodies</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>166</td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <div class="flex items-center gap-2">-->
<!--                                    <span class="avatar avatar-rounded avatar-md">-->
<!--                                        <img-->
<!--                                                class="avatar-img avatar-rounded"-->
<!--                                                src="img/products/product-5.jpg"-->
<!--                                                loading="lazy"-->
<!--                                        />-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold">Blue Backpack</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>93</td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>-->
<!--                                <div class="flex items-center gap-2">-->
<!--                                    <span class="avatar avatar-rounded avatar-md">-->
<!--                                        <img-->
<!--                                                class="avatar-img avatar-rounded"-->
<!--                                                src="img/products/product-7.jpg"-->
<!--                                                loading="lazy"-->
<!--                                        />-->
<!--                                    </span>-->
<!--                                    <span class="font-semibold">Strip Analog Watch</span>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td>81</td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout.html}">
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/tom-select"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.0/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.0/dist/sweetalert2.min.js"></script>

    <title>Trang Thống Kê</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
        }
        .container {
            padding: 20px;
        }
        .header {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        .card {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 22%;
            text-align: center;
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-10px);
        }
        .card h2 {
            margin: 0;
            font-size: 3em;
            color: #007bff;
        }
        .card p {
            margin: 0;
            color: #6c757d;
        }
        .positive-change {
            color: green;
        }
        .negative-change {
            color: red;
        }
        .content {
            display: flex;
            justify-content: space-between;
        }
        .chart, .orders {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 48%;
            height: 400px;
            overflow-y: auto;
        }
        .orders ul {
            list-style: none;
            padding: 0;
        }
        .orders li {
            padding: 10px;
            border-bottom: 1px solid #dee2e6;
        }
        .orders li:last-child {
            border-bottom: none;
        }
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .pagination button {
            background: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .pagination button:hover {
            background: #0056b3;
        }
        .tabs {
            display: flex;
            flex-direction: column;
            border: 1px solid #ccc;
            border-radius: 10px;
            overflow: hidden;
            background-color: #f1f1f1;
            margin-right: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 1px solid #ccc;
            text-align: center;
            background-color: #fff;
            transition: background-color 0.3s;
        }
        .tab:last-child {
            border-bottom: none;
        }
        .tab.active {
            background-color: #4CAF50;
            color: white;
        }
        .tab:hover {
            background-color: #ddd;
        }
        .chart-container {
            flex: 1;
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #fff;
        }
        .chart-container.active {
            display: block;
        }
        .input-container {
            margin-top: 20px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .input-container label {
            margin-right: 10px;
        }
        .input-container select, .input-container input {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            outline: none;
            transition: border-color 0.3s;
        }
        .input-container select:focus, .input-container input:focus {
            border-color: #4CAF50;
        }
        .input-container button {
            padding: 5px 15px;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .input-container button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
<div class="container" layout:fragment="admincontent">
    <div class="header">
        <div class="card">
            <h2 id="customers-today">0</h2>
            <p>Khách hàng hôm nay</p>
            <p id="customers-change-today">+0% so với hôm qua</p>
        </div>
        <div class="card">
            <h2 id="orders-today">0</h2>
            <p>Đơn hàng hôm nay</p>
            <p id="orders-change-today">+0% so với hôm qua</p>
        </div>
        <div class="card">
            <h2 id="customers-month">0</h2>
            <p>Khách hàng tháng này</p>
            <p id="customers-change-month">+0% so với tháng trước</p>
        </div>
        <div class="card">
            <h2 id="orders-month">0</h2>
            <p>Đơn hàng tháng này</p>
            <p id="orders-change-month">+0% so với tháng trước</p>
        </div>
    </div>
    <div class="content">
        <div class="chart">
            <canvas id="orderChart"></canvas>
        </div>
        <div class="orders">
            <h3>Danh sách đơn hàng hôm nay</h3>
            <ul id="orderList">
                <!-- Orders will be inserted here -->
            </ul>
            <div class="pagination">
                <button id="prevPage">Trước</button>
                <button id="nextPage">Sau</button>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="tabs">
            <div class="tab" id="tab1">Sản phẩm</div>
            <div class="tab" id="tab2">Đơn hàng</div>
        </div>

        <div class="chart-container" id="chart1">
            <canvas id="myChart1"></canvas>
            <div class="input-container">
                <label for="product1">Thương hiệu:</label>
                <select id="product1">
                </select>
                <label for="product2">Sản phẩm:</label>
                <select id="product2">
                </select>
                <label for="product3">Màu sắc:</label>
                <select id="product3">
                </select>
                <button id="updateChart1">Thống kê</button>
            </div>
        </div>

        <div class="chart-container" id="chart2">
            <canvas id="myChart2"></canvas>
            <div class="input-container">
                <label for="startMonth">Tháng bắt đầu:</label>
                <input type="number" id="startMonth" min="1" max="12" value="1">
                <label for="endMonth">Tháng kết thúc:</label>
                <input type="number" id="endMonth" min="1" max="12" value="12">
                <button id="updateChart2">Chọn</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const stats = {
                customersToday: 0,
                customersYesterday: 0,
                ordersToday: 0,
                ordersYesterday: 0,
                customersThisMonth: 0,
                customersLastMonth: 0,
                ordersThisMonth: 0,
                ordersLastMonth: 0
            };

            const apiEndpoints = {
                customersToday: '/admin/api/thong-ke/countKhachHangToday?trangThai=6',
                customersYesterday: '/admin/api/thong-ke/countKhachHangYesterday?trangThai=6',
                ordersToday: '/admin/api/thong-ke/countHoaDonToday?trangThai=6',
                ordersYesterday: '/admin/api/thong-ke/countHoaDonYesterday?trangThai=6',
                customersThisMonth: '/admin/api/thong-ke/countKhachHangThisMonth?trangThai=6',
                customersLastMonth: '/admin/api/thong-ke/countKhachHangLastMonth?trangThai=6',
                ordersThisMonth: '/admin/api/thong-ke/countHoaDonThisMonth?trangThai=6',
                ordersLastMonth: '/admin/api/thong-ke/countHoaDonLastMonth?trangThai=6',
                ordersCurrentWeek: '/admin/api/thong-ke/countHoaDonForCurrentWeek?trangThai=6',
                ordersToday: '/admin/api/thong-ke/today',
                apiEndpoint: '/admin/api/thong-ke/listThuongHieu',
                listSanPhamByThuongHieu: '/admin/api/thong-ke/listSanPhamByThuongHieu?id=',
                listMauSacBySanPham: '/admin/api/thong-ke/listMauSacBySanPham?id='
            };

            let orders = []; // Khởi tạo mảng rỗng để lưu dữ liệu đơn hàng
            const itemsPerPage = 5;
            let currentPage = 1;

            async function fetchStats() {
                for (const key in apiEndpoints) {
                    if (apiEndpoints.hasOwnProperty(key)) {
                        try {
                            const response = await fetch(apiEndpoints[key]);
                            const result = await response.json();
                            if (key === 'ordersToday') {
                                orders = result; // Cập nhật dữ liệu đơn hàng từ API
                            } else {
                                stats[key] = result;
                            }
                            console.log(`API ${key} đã được gọi: ${apiEndpoints[key]}`);
                            console.log(`Kết quả:`, result);
                        } catch (error) {
                            console.error(`Error fetching ${key}:`, error);
                        }
                    }
                }
                updateStats();
                setupChart();
                renderOrderList(); // Hiển thị danh sách đơn hàng sau khi lấy dữ liệu
            }

            function calculatePercentageChange(newVal, oldVal) {
                if (oldVal === 0) {
                    return newVal > 0 ? '100' : '0';
                }
                return ((newVal - oldVal) / oldVal * 100).toFixed(2);
            }

            function updateStats() {
                const customersYesterday = stats.customersYesterday || 1;
                const ordersYesterday = stats.ordersYesterday || 1;
                const customersLastMonth = stats.customersLastMonth || 1;
                const ordersLastMonth = stats.ordersLastMonth || 1;

                const customersTodayChange = ((stats.customersToday - customersYesterday) / customersYesterday * 100).toFixed(2);
                const ordersTodayChange = ((stats.ordersToday - ordersYesterday) / ordersYesterday * 100).toFixed(2);
                const customersMonthChange = ((stats.customersThisMonth - customersLastMonth) / customersLastMonth * 100).toFixed(2);
                const ordersMonthChange = ((stats.ordersThisMonth - ordersLastMonth) / ordersLastMonth * 100).toFixed(2);

                document.getElementById("customers-today").innerText = stats.customersToday;
                document.getElementById("customers-change-today").innerText = `${customersTodayChange}% so với hôm qua`;
                document.getElementById("customers-change-today").className = customersTodayChange >= 0 ? 'positive-change' : 'negative-change';

                document.getElementById("orders-today").innerText = stats.ordersToday;
                document.getElementById("orders-change-today").innerText = `${ordersTodayChange}% so với hôm qua`;
                document.getElementById("orders-change-today").className = ordersTodayChange >= 0 ? 'positive-change' : 'negative-change';

                document.getElementById("customers-month").innerText = stats.customersThisMonth;
                document.getElementById("customers-change-month").innerText = `${customersMonthChange}% so với tháng trước`;
                document.getElementById("customers-change-month").className = customersMonthChange >= 0 ? 'positive-change' : 'negative-change';

                document.getElementById("orders-month").innerText = stats.ordersThisMonth;
                document.getElementById("orders-change-month").innerText = `${ordersMonthChange}% so với tháng trước`;
                document.getElementById("orders-change-month").className = ordersMonthChange >= 0 ? 'positive-change' : 'negative-change';
            }

            // api lấy ra combobox

            async function updateProductSelects() {
                try {
                    const response = await fetch(apiEndpoints.apiEndpoint);
                    const thuongHieus = await response.json();

                    updateSelectThuongHieu('product1', thuongHieus);
                } catch (error) {
                    console.error(`Error fetching data:`, error);
                }
            }

            async function fetchSanPhamByThuongHieu(id) {
                try {
                    const response = await fetch(apiEndpoints.listSanPhamByThuongHieu + id);
                    const sanPhams = await response.json();
                    updateSelectSanPham('product2', sanPhams);
                } catch (error) {
                    console.error(`Error fetching products by brand:`, error);
                }
            }

            async function fetchMauSacBySanPham(id) {
                try {
                    const response = await fetch(apiEndpoints.listMauSacBySanPham + id);
                    const mauSacs = await response.json();
                    updateSelectMauSac('product3', mauSacs);
                } catch (error) {
                    console.error(`Error fetching products by brand:`, error);
                }
            }

            //// hiệu ứng click combobox

            function handleProductSelectChange(event) {
                const selectedValue = event.target.value;
                if (selectedValue) {
                    fetchSanPhamByThuongHieu(selectedValue);
                }
            }

            document.getElementById("product1").addEventListener("change", handleProductSelectChange);

            function handleMauSacSelectChange(event) {
                const selectedValue = event.target.value;
                if (selectedValue) {
                    fetchMauSacBySanPham(selectedValue);
                }
            }

            document.getElementById("product2").addEventListener("change", handleMauSacSelectChange);

            // hiển thị lên combobox
            function updateSelectThuongHieu(selectId, thuongHieus) {
                const selectElement = document.getElementById(selectId);
                selectElement.innerHTML = "";

                const defaultOption = document.createElement("option");
                defaultOption.value = 0;
                defaultOption.textContent = "Chọn";
                selectElement.appendChild(defaultOption);

                thuongHieus.forEach(thuongHieu => {
                    const option = document.createElement("option");
                    option.value = thuongHieu.thuongHieuId;
                    option.textContent = thuongHieu.ten;
                    selectElement.appendChild(option);
                });
            }

            function updateSelectSanPham(selectId, sanPhams) {
                const selectElement = document.getElementById(selectId);
                selectElement.innerHTML = "";

                const defaultOption = document.createElement("option");
                defaultOption.value = 0;
                defaultOption.textContent = "Chọn";
                selectElement.appendChild(defaultOption);

                sanPhams.forEach(sanPham => {
                    const option = document.createElement("option");
                    option.value = sanPham.sanPhamId;
                    option.textContent = sanPham.ten;
                    selectElement.appendChild(option);
                });
            }

            function updateSelectMauSac(selectId, mauSacs) {
                const selectElement = document.getElementById(selectId);
                selectElement.innerHTML = "";

                const defaultOption = document.createElement("option");
                defaultOption.value = 0;
                defaultOption.textContent = "Chọn";
                selectElement.appendChild(defaultOption);

                mauSacs.forEach(mauSac => {
                    const option = document.createElement("option");
                    option.value = mauSac.mauSacId;
                    option.textContent = mauSac.ten;
                    selectElement.appendChild(option);
                });
            }

            document.getElementById("updateChart1").addEventListener("click", handleUpdateChart1);
            document.getElementById("updateChart2").addEventListener("click", handleUpdateChart2);

            /////// thống kê

            async function handleUpdateChart1() {
                const thuongHieuId = document.getElementById("product1").value;
                const sanPhamId = document.getElementById("product2").value;
                const mauSacId = document.getElementById("product3").value;

                if (thuongHieuId === "0" || sanPhamId === "0" || mauSacId === "0") {
                    Swal.fire({
                        position: 'center',
                        toast: false,
                        showConfirmButton: false,
                        timer: 2000,
                        text: 'Vui lòng chọn đầy đủ thông tin!',
                        icon: 'warning',
                    });
                    return;
                }

                try {
                    const nameSpResponse = await fetch(`/admin/api/thong-ke/nameSpOfSanPhamChiTiet?idSp=${sanPhamId}&idMs=${mauSacId}`);
                    const nameSpData = await nameSpResponse.json();

                    const giaBanOfSanPhamChiTietResponse = await fetch(`/admin/api/thong-ke/giaBanOfSanPhamChiTiet?idSp=${sanPhamId}&idMs=${mauSacId}`);
                    const giaBanOfSanPhamChiTietData = await giaBanOfSanPhamChiTietResponse.json();

                    const countSoLuongTonResponse = await fetch(`/admin/api/thong-ke/countSoLuongTonOfSanPhamChiTiet?idSp=${sanPhamId}&idMs=${mauSacId}`);
                    const countSoLuongTonData = await countSoLuongTonResponse.json();

                    const countSoLuongBanResponse = await fetch(`/admin/api/thong-ke/countSoLuongBanOfSanPhamChiTiet?idSp=${sanPhamId}&idMs=${mauSacId}`);
                    const countSoLuongBanData = await countSoLuongBanResponse.json();

                    updateChart1(nameSpData, giaBanOfSanPhamChiTietData, countSoLuongTonData, countSoLuongBanData);
                } catch (error) {
                    console.error(`Error fetching data:`, error);
                }
            }

            async function handleUpdateChart2(){
                var startMonth = parseInt(document.getElementById('startMonth').value);
                var endMonth = parseInt(document.getElementById('endMonth').value);

                if (isNaN(startMonth) || isNaN(endMonth)) {
                    Swal.fire({
                        position: 'center',
                        toast: false,
                        showConfirmButton: false,
                        timer: 2000,
                        text: 'Vui lòng nhập giá trị cho cả hai tháng!',
                        icon: 'warning',
                    });
                    return;
                }
                if (startMonth < 1 || startMonth > 12 || endMonth < 1 || endMonth > 12) {
                    Swal.fire({
                        position: 'center',
                        toast: false,
                        showConfirmButton: false,
                        timer: 2000,
                        text: 'Giá trị tháng phải nằm trong khoảng từ 1 đến 12!',
                        icon: 'warning',
                    });
                    return;
                }
                if (startMonth >= endMonth) {
                    Swal.fire({
                        position: 'center',
                        toast: false,
                        showConfirmButton: false,
                        timer: 2000,
                        text: 'Tháng bắt đầu phải nhỏ hơn tháng kết thúc!',
                        icon: 'warning',
                    });
                    return;
                }

                try {
                    const nameSpResponse = await fetch(`/admin/api/thong-ke/getNumbersInRange?start=${startMonth}&end=${endMonth}`);
                    const nameSpData = await nameSpResponse.json();

                    const countsDonHangByMonthHoanThanhResponse = await fetch(`/admin/api/thong-ke/countsDonHangByMonth?start=${startMonth}&end=${endMonth}&trangThai=6`);
                    const countsDonHangByMonthHoanThanhData = await countsDonHangByMonthHoanThanhResponse.json();

                    const countsDonHangByMonthHuyResponse = await fetch(`/admin/api/thong-ke/countsDonHangByMonth?start=${startMonth}&end=${endMonth}&trangThai=7`);
                    const countsDonHangByMonthHuyData = await countsDonHangByMonthHuyResponse.json();

                    const sumDonHangByMonthHoanThanhResponse = await fetch(`/admin/api/thong-ke/sumDonHangByMonth?start=${startMonth}&end=${endMonth}&trangThai=6`);
                    const sumDonHangByMonthHoanThanhData = await sumDonHangByMonthHoanThanhResponse.json();

                    const sumDonHangByMonthHuyResponse = await fetch(`/admin/api/thong-ke/sumDonHangByMonth?start=${startMonth}&end=${endMonth}&trangThai=7`);
                    const sumDonHangByMonthHuyData = await sumDonHangByMonthHuyResponse.json();

                    updateChart2(nameSpData, countsDonHangByMonthHoanThanhData, countsDonHangByMonthHuyData, sumDonHangByMonthHoanThanhData, sumDonHangByMonthHuyData);
                } catch (error) {
                    console.error(`Error fetching data:`, error);
                }
            }

            /////////////

            function renderOrderList() {
                const start = (currentPage - 1) * itemsPerPage;
                const end = start + itemsPerPage;
                const orderList = document.getElementById("orderList");
                orderList.innerHTML = "";

                for (let i = start; i < end && i < orders.length; i++) {
                    const listItem = document.createElement("li");
                    listItem.innerText = orders[i];
                    orderList.appendChild(listItem);
                }
            }

            document.getElementById("prevPage").addEventListener("click", function() {
                if (currentPage > 1) {
                    currentPage--;
                    renderOrderList();
                }
            });

            document.getElementById("nextPage").addEventListener("click", function() {
                if (currentPage * itemsPerPage < orders.length) {
                    currentPage++;
                    renderOrderList();
                }
            });

            async function setupChart() {
                try {
                    const response = await fetch(apiEndpoints.ordersCurrentWeek);
                    const weeklyOrders = await response.json();

                    const ctx = document.getElementById("orderChart").getContext("2d");
                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ["Thứ 2", "Thứ 3", "Thứ 4", "Thứ 5", "Thứ 6", "Thứ 7", "Chủ Nhật"],
                            datasets: [{
                                label: 'Đơn hàng hoàn thành',
                                data: weeklyOrders,
                                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                borderColor: 'rgba(54, 162, 235, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error(`Error setting up chart:`, error);
                }
            }

            function updateChart1(nameSpData, giaBanOfSanPhamChiTietData, countSoLuongTonData, countSoLuongBanData) {
                var ctx1 = document.getElementById('myChart1').getContext('2d');
                var myChart1 = new Chart(ctx1, {
                    type: 'bar',
                    data: {
                        labels: nameSpData,
                        datasets: [{
                            label: 'Tổng tiền',
                            type: 'bar',
                            data: giaBanOfSanPhamChiTietData,
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1,
                            yAxisID: 'y-axis-1'
                        }, {
                            label: 'Số đơn hoàn thành',
                            type: 'line',
                            data: countSoLuongTonData,
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1,
                            fill: false,
                            yAxisID: 'y-axis-2'
                        }, {
                            label: 'Số đơn hủy',
                            type: 'line',
                            data: countSoLuongBanData,
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1,
                            fill: false,
                            yAxisID: 'y-axis-2'
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                id: 'y-axis-1',
                                type: 'linear',
                                position: 'left',
                                ticks: {
                                    beginAtZero: true
                                }
                            }, {
                                id: 'y-axis-2',
                                type: 'linear',
                                position: 'right',
                                ticks: {
                                    beginAtZero: true
                                },
                                gridLines: {
                                    drawOnChartArea: false
                                }
                            }]
                        }
                    }
                });
            }

            let myChart2;

            function updateChart2(nameSpData, countsDonHangByMonthHoanThanhData, countsDonHangByMonthHuyData, sumDonHangByMonthHoanThanhData, sumDonHangByMonthHuyData) {
                var ctx2 = document.getElementById('myChart2').getContext('2d');

                // Nếu biểu đồ đã được tạo, phá hủy biểu đồ cũ
                if (myChart2) {
                    myChart2.destroy();
                }

                // Tạo biểu đồ mới
                myChart2 = new Chart(ctx2, {
                    type: 'bar',
                    data: {
                        labels: nameSpData,
                        datasets: [{
                            type: 'bar',
                            label: 'Số đơn hoàn thành',
                            data: countsDonHangByMonthHoanThanhData,
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1,
                            yAxisID: 'y-axis-1'
                        }, {
                            type: 'bar',
                            label: 'Số đơn hủy',
                            data: countsDonHangByMonthHuyData,
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1,
                            yAxisID: 'y-axis-1'
                        }, {
                            type: 'line',
                            label: 'Tổng tiền hoàn thành',
                            data: sumDonHangByMonthHoanThanhData,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            fill: true,
                            yAxisID: 'y-axis-2'
                        }, {
                            type: 'line',
                            label: 'Tổng tiền hủy',
                            data: sumDonHangByMonthHuyData,
                            borderColor: 'rgba(255, 159, 64, 1)',
                            backgroundColor: 'rgba(255, 159, 64, 0.2)',
                            fill: true,
                            yAxisID: 'y-axis-2'
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                id: 'y-axis-1',
                                type: 'linear',
                                position: 'left',
                                ticks: {
                                    beginAtZero: true
                                }
                            }, {
                                id: 'y-axis-2',
                                type: 'linear',
                                position: 'right',
                                ticks: {
                                    beginAtZero: true
                                },
                                gridLines: {
                                    drawOnChartArea: false
                                }
                            }]
                        }
                    }
                });
            }


            fetchStats();
            updateProductSelects();
        });
    </script>

    <script>
        $(document).ready(function() {
            $('.tab').click(function() {
                var tabId = $(this).attr('id');
                $('.tab').removeClass('active');
                $(this).addClass('active');
                $('.chart-container').removeClass('active');
                $('#chart' + tabId.slice(-1)).addClass('active');
            });

            $('#tab1').click();
        });
    </script>

</div>

</body>
</html>
